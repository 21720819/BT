{% extends 'nav.html' %}

{% block content %}

<!-- {{user.username}} 의 프로필 -->
<!-- 레벨{{user.level}} -->
<!-- 최근접속일{{user.last_login.date}} -->
<!-- 가입일{{user.date_joined.date}} -->
<!-- 
<br>
{{user.username}}이 작성한 글
{% for post in posts %}
    <a href="{% url 'buyDetail' post.id %}">{{post.title}}</a>
{% endfor %}
<br>
<a href="">신고하기</a> -->


<div class="detail_container" style="max-width: 768px;">
    <table id="profile_table">
        <tr>
            <td style="width: 30px;"><img class="profile_img"></td>
            <td style="font-size: 20px; text-align: left;">
                <h3 class="profile_nick">{{user.username}}</h3>
                <!-- <h4 class="profile_text" style="font-size: 15px;">{{user.level}}</h4> -->
            </td>
        </tr>
    </table>

    <div class="profile_summary">
        <div class="profile_division">
            <div class="profile_divUpParts profile_verticalHr">레벨</div>
            <div class="profile_divDownParts profile_verticalHr">{{user.level}}</div>
        </div>
        <div class="profile_division">
            <div class="profile_divUpParts profile_verticalHr">가입일</div>
            <div class="profile_divDownParts profile_verticalHr">{{user.date_joined|date:'Y-m-d'}}</div>
        </div><div class="profile_division">
            <div class="profile_divUpParts">휴대폰 인증</div>
            <!-- <div class="profile_divDownParts">{{user.last_login|date:'Y-m-d'}}</div> -->
            <div class="profile_divDownParts">미인증</div>
        </div>
    </div>

    <div class="profile_summary" style="background-color: white; padding: 0;">
        <!-- 데스크탑 -->
        <div id="profile_desktop">
            <div id="profile_myPost" class="profile_halfDiv">
                <div class="profile_divUpParts profile_horizontalHr" style="margin-bottom: 15px; padding: 10px 0;">작성한 글</div>
                <div class="profile_posts">
                    {% for post in posts %}
                        <a href="{% url 'buyDetail' post.id %}" class="profile_list nav-link nav_change_color">{{post.title}}</a>
                    {% endfor %}
                </div>
            </div>
            <div class="profile_halfDiv">
                <div class="profile_divUpParts profile_horizontalHr" style="margin-bottom: 15px; padding: 10px 0;">사용자 평가</div>
                <div class="profile_posts">
                    <!-- {% for like in likes %}
                        <a href="{% url 'buyDetail' like.id %}" class="profile_list nav-link nav_change_color">{{like.title}}</a>
                    {% endfor %} -->
                </div>
            </div>
        </div>

        <!-- 모바일 -->
        <div id="profile_mobile">
            <div class="profile_halfDivM" style="margin-right: 30px;">
                <div style="width: 100%; position: absolute; top: 50%; transform: translate(0, -50%);">
                    <div class="profile_divUpParts">작성한 글</div>
                    
                    <!-- 글 수 -->
                    <div id="myPost" class="profile_divDownParts" style="font-size: 35px; line-height: 45px; padding-top: 10%;">
                        {% for post in posts %}
                            {% if forloop.last %}
                                {{ forloop.counter }}
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="profile_halfDivM">
                <div style="width: 100%; position: absolute; top: 50%; transform: translate(0, -50%);">
                    <div class="profile_divUpParts">사용자 평가</div>
                    <div id="review" class="profile_divDownParts" style="font-size: 35px; line-height: 45px; padding-top: 10%;">★ 0.0</div>
                </div>
            </div>
        </div>      
    </div>

    <div class="profile_summary profile_btns">
        <a class="nav-link nav_change_color" href="">무엇이</a>
    </div>
    
    <div id="sms" class="profile_summary profile_btns">
        <a class="nav-link nav_change_color" href="">들어가야 할까</a>
    </div>

    <div id="profile_delete" class="profile_summary profile_btns">
        <a class="nav-link nav_change_color" href="">신고하기</a>
    </div>
</div>

<!-- 팝업 -->
<div id="pop" class="pop_wrap" style="display: none;">
    <div class="pop_inner">
        <div id="title" class="profile_divUpParts pop_blank"></div>
        <div id="profile_postBox">
            <div id="profile_pPosts" class="profile_posts" style="display: none;">
                <!-- <div class="profile_horizontalHr" style="margin-bottom: 1rem;"></div> -->
                {% for post in posts %}
                    <a href="{% url 'buyDetail' post.id %}" class="profile_list nav-link nav_change_color">{{post.title}}</a>
                    {% if not forloop.last %}
                        <div class="profile_horizontalHr" style="margin: 1rem 0;"></div>
                    {% endif %}
                {% endfor %}
                <div class="profile_horizontalHr" style="margin-top: 1rem;"></div>
            </div>
            <div id="profile_rPosts" class="profile_posts" style="display: none;">
                <!-- {% for like in likes %}
                    <a href="{% url 'buyDetail' like.id %}" class="profile_list nav-link nav_change_color">{{like.title}}</a>
                {% endfor %} -->
            </div>
        </div>  
        <div class="pop_blank"><div id="close" class="buttonColor"><ion-icon name="close-outline" style="width: 80%; height: 80%; color: white;"></ion-icon></div></div>
    </div>
</div>

<!-- 팝업 스크립트 -->
<script>
    var myPost = document.getElementById('myPost');
    //var review = document.getElementById('review');
    //var pop = document.getElementById('pop');
    var close_btn = document.getElementById('close');
    var title = document.getElementById('title');
    //var post = document.getElementById('post');
    var pPosts = document.getElementById('profile_pPosts');
    var rPosts = document.getElementById('profile_rPosts');
    var background = document.getElementsByClassName('detail_container');
    
    myPost.onclick = function() {
        document.getElementById('pop').style.display = 'block';

        title.textContent = '작성한 글'
        pPosts.style.display = 'block';
        rPosts.style.display = 'none';

        background[0].classList.add('blur');
    };

    /*review.onclick = function() {
        document.getElementById('pop').style.display = 'block';

        title.textContent = '사용자 평가'
        pPosts.style.display = 'none';
        rPosts.style.display = 'block';

        background[0].classList.add('blur');
    };*/

    close_btn.onclick = function() {
        this.parentNode.parentNode.parentNode.style.display = 'none';
        pPosts.style.display = 'none';
        rPosts.style.display = 'none';

        background[0].classList.remove('blur');
    };
</script>

{% endblock %}