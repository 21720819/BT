{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>바이투게더</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

    <!-- ===== BOX ICONS ===== -->
    <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>
    
    <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
</head>

<body class="font_change" id="body-pd">
    <header class="header" id="header">
        <div class="header__toggle">
            <i class='bx bx-menu' id="header-toggle"></i>
        </div>
        <div class="header__img">
            <img src="">
        </div>
    </header> 

    <div class="l-navbar" id="nav-bar">
        <nav class="nav">
            <div>
                <a href="" class="nav__logo">
                    <i class='bx bx-layer nav__logo-icon'></i>
                    <span class="nav__logo-name">BuyTogether</span>
                </a>
                <div class="nav__list">
                    <a href="{% url 'home' %}" class="nav__link active">
                        <ion-icon name="home-outline" class="nav__icon"></ion-icon>
                        <span class="nav__name">홈</span>
                    </a>
                    <a href="{% url 'chatHome' %}" class="nav__link">
                        <ion-icon name="chatbubbles" class="nav__icon"></ion-icon>
                        <span class="nav__name">채팅</span>
                    </a>
                    <a href="{% url 'buyHome' %}" class="nav__link">
                        <ion-icon name="bag-add-outline" class="nav__icon"></ion-icon>
                        <span class="nav__name">거래게시판</span>
                    </a>
                    <a href="{% url 'freeHome' %}" class="nav__link">
                        <ion-icon name="earth-outline" class="nav__icon"></ion-icon>
                        <span class="nav__name">자유게시판</span>
                    </a>
                    <a href="{% url 'map' %}" class="nav__link">
                        <ion-icon name="navigate-circle-outline" class="nav__icon"></ion-icon>
                        <span class="nav__name">지도</span>
                    </a>
                    {% if user.is_authenticated %}
                    <a href="{% url 'profileHome' user.username %}" class="nav__link">
                        <ion-icon name="person-circle-outline" class="nav__icon"></ion-icon>
                        <span class="nav__name">프로필</span>
                    </a>
                </div>
            </div>
            <a href="{% url 'logout' %}" class="nav__link">
                <ion-icon name="lock-closed" class="nav__icon"></ion-icon>
                <span class="nav__name">로그아웃</span>
            </a>
                    {% else %}
                    <a href="{% url 'login' %}" class="nav__link">
                        <ion-icon name="person-circle-outline" class="nav__icon"></ion-icon>
                        <span class="nav__name">프로필</span>
                    </a>
                </div>
            </div>
            <a href="{% url 'login' %}" class="nav__link">
                <ion-icon name="lock-open" class="nav__icon"></ion-icon>
                <span class="nav__name">로그인</span>
            </a>
            {% endif %}
        </nav>
    </div>

    <!-- 내용이 들어가는 공간 -->
    <!--<div id="content_container">-->
    <div>
        {% block content %}
        {% endblock %}
    </div>

    <!-- js -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
        integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
        crossorigin="anonymous"></script>

    <!-- IONICONS 아이콘 js -->
    <script src="https://unpkg.com/ionicons@5.2.3/dist/ionicons.js"></script>
    <!-- navbar 추가 js -->
    <script src="assets/js/main.js"></script>

    <!-- navbar js -->
    <script>
        const showNavbar = (toggleId, navId, bodyId, headerId) => {
            const toggle = document.getElementById(toggleId),
                nav = document.getElementById(navId),
                bodypd = document.getElementById(bodyId),
                headerpd = document.getElementById(headerId)

            if (toggle && nav && bodypd && headerpd) {
                toggle.addEventListener('click', () => {
                    nav.classList.toggle('show')

                    toggle.classList.toggle('bx-x')

                    bodypd.classList.toggle('body-pd')

                    headerpd.classList.toggle('body-pd')
                })
            }
        }

        showNavbar('header-toggle', 'nav-bar', 'body-pd', 'header')
    </script>

    <!-- navbar 새로고침 js -->
    <script>
        $(function () { 
            var url = window.location.pathname, 
            urlRegExp = new RegExp(url.replace(/\/$/, '') + "$");
                $('.nav__link').each(function () { 
                    $(this).removeClass('active');
                if (urlRegExp.test(this.href.replace(/\/$/, ''))) {
                        $(this).addClass('active'); 
                    } 
                }); 
            });
    </script>

    <!-- 슬라이드 메뉴 js -->
    <script>
    const indicator = document.querySelector('.menu-indicator');
    const items = document.querySelectorAll('.menu-item');

    function handleIndicator(el) {
        items.forEach(item => {
            item.classList.remove('is-active');
            item.removeAttribute('style');
        });

        indicator.style.width = `${el.offsetWidth}px`;
        indicator.style.left = `${el.offsetLeft}px`;
        indicator.style.backgroundColor = el.getAttribute('active-color');

        el.classList.add('is-active');
        el.style.color = el.getAttribute('active-color');
    }


    items.forEach((item, index) => {
        item.addEventListener('click', (e) => { handleIndicator(e.target) });
        item.classList.contains('is-active') && handleIndicator(item);
    });
    </script> 

    </body>
</html>